import{m as _,r as d,T as h,f as O,g as b,o as n,a as e,t as o,u as l,c as i,h as L,F as T,e as D,j as x,k as g,n as k,Q as C}from"./app-ff1cf28b.js";import F from"./App-2f7b7ec0.js";import{_ as $}from"./Modal-46c3116d.js";import{P as Y}from"./Pagination-bee1db91.js";import"./App-200be969.js";import"./Sidebar-64d20dd8.js";import"./Menu-b47c2397.js";import"./ProfileModal-a020d5af.js";import"./FormInput-3fbd5c74.js";import"./FormPhoneInput-b72003c2.js";/* empty css                      */import"./index-67ab22c4.js";import"./keyboard-86bd0e32.js";import"./transition-84b18172.js";import"./LangToggle-653d00f4.js";import"./MobileSidebar-42141944.js";import"./index-32277fb3.js";/* empty css              */import"./useRtl-e792e532.js";import"./Sidebar-d22f96a8.js";import"./_plugin-vue_export-helper-c27b6911.js";const W={class:"text-xl mb-6"},q={class:"bg-white border px-2 py-2 rounded-md mb-8"},P={class:"text-sm mb-2"},R={class:"text-sm"},E={class:"text-sm flex items-center gap-x-4 mb-2"},I=["disabled"],J={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},K={key:1},Q={key:0,class:"mb-8"},G={class:"flex items-center text-sm"},H={class:"ml-1 mt-1"},X={key:1},ee={class:"bg-white text-sm flex items-center justify-between border rounded-md px-2 py-2 mb-6"},te={class:"flex items-center gap-x-2"},se={key:2,class:"flex items-center text-sm mb-4"},oe={class:"ml-1 mt-1"},ne={key:3,class:"grid grid-cols-2 gap-x-4 gap-y-1"},ie={class:"bg-white text-sm flex items-center justify-between border rounded-md px-2 py-2"},re={class:"flex items-center gap-x-2"},le=["src","alt"],ae=["onClick"],de={key:1,class:"border rounded-md px-4 py-1 bg-red-700 text-white flex items-center"},pe={class:"ml-1"},ue={class:"grid grid-cols-1 gap-x-6 gap-y-4"},me={class:"bg-slate-50 mx-[-30px] px-6 mt-[-25px] py-4 border-b"},ce={class:"flex items-center gap-x-3"},ve=["src"],ge={class:"text-[16px]"},fe={class:"text-[17px] text-gray-800 mb-2"},he={class:"text-sm"},be={class:"mt-3 border-t pt-5 flex"},xe=["disabled"],we={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},ye={key:1},_e={class:"grid grid-cols-1 gap-x-6 gap-y-4"},ke={class:"bg-slate-50 mx-[-30px] px-6 mt-[-25px] py-4 border-b"},Ce={class:"flex items-center gap-x-3"},$e={class:"text-[16px]"},Ae={class:"text-sm"},Be={class:"mt-3 border-t pt-5 flex"},Ze=["disabled"],Me={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},Ve={key:1},Xe={__name:"Updates",props:{config:{type:Object,required:!0},rows:{type:Array,required:!0}},setup(u){const A=u,B=_(()=>C().props.applicationVersion),Z=_(()=>C().props.applicationReleaseDate),w=d(null),y=d(null),M=d(null),V=d(!1),m=d(!1),c=d(!1),p=s=>{const t=A.config.find(r=>r.key===s);return t?t.value:""},a=h({uuid:null,purchase_code:null,addon:null,name:null}),v=h({update:!0}),f=h({checkUpdate:!0}),j=()=>{m.value=!0},S=s=>{w.value=s.logo,y.value=s.name,M.value=s.description;const t=s.metadata?JSON.parse(s.metadata):null;a.uuid=s.uuid,a.name=s.name,a.addon=(t==null?void 0:t.name)||s.name,c.value=!0},U=()=>{a.post("/admin/addons/update",{preserveScroll:!0,onSuccess:()=>{c.value=!1}})},z=()=>{v.post("/admin/update",{preserveScroll:!0,onSuccess:()=>{m.value=!1}})},N=()=>{f.get("/admin/updates/check",{preserveScroll:!0,onSuccess:()=>{V.value=!1}})};return(s,t)=>(n(),O(F,null,{default:b(()=>[e("div",null,[e("h2",W,o(s.$t("Blazz Updates")),1),e("div",q,[e("div",P,"Current Version: v"+o(B.value),1),e("div",R,"Released Date: "+o(Z.value),1)]),e("div",E,[e("span",null,"Last checked on "+o(p("last_update_check")),1),e("button",{onClick:t[0]||(t[0]=r=>N()),disabled:l(f).processing,class:"border px-2 py-1 text-sm rounded-md bg-primary text-white"},[l(f).processing?(n(),i("svg",J,[...t[6]||(t[6]=[e("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),e("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[e("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1)])])):(n(),i("span",K,"Check Again"))],8,I)]),p("is_update_available")==0?(n(),i("div",Q,[e("p",G,[t[7]||(t[7]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1)),e("span",H,o(s.$t("You have installed the latest version of Blazz")),1)])])):(n(),i("div",X,[t[9]||(t[9]=e("div",{class:"flex items-center gap-x-1 text-sm bg-orange-100 py-3 px-2 rounded-md mb-4"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})]),e("span",null,[e("b",null,"Important:"),L(" Before updating backup your database and files")])],-1)),e("div",ee,[e("div",te,[t[8]||(t[8]=e("img",{class:"h-5 w-full",src:"/images/logo.png",alt:"Blazz Logo"},null,-1)),e("span",null,"v"+o(p("available_version")),1)]),e("button",{onClick:t[1]||(t[1]=r=>j()),class:"border rounded-md px-4 py-1"},o(s.$t("Update to version")+" "+p("available_version")),1)])])),t[12]||(t[12]=e("h2",{class:"text-xl mb-2"},"Addons",-1)),u.rows.data.length==0?(n(),i("p",se,[t[10]||(t[10]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1)),e("span",oe,o(s.$t("Your addons are all upto date.")),1)])):(n(),i("div",ne,[(n(!0),i(T,null,D(u.rows.data,r=>(n(),i("div",ie,[e("div",re,[e("img",{class:"h-8 w-8",src:"/images/"+r.logo,alt:r.name},null,8,le),e("span",null,o(r.name),1)]),p("is_update_available")==0?(n(),i("button",{key:0,onClick:je=>S(r),class:"border rounded-md px-4 py-1"},"Update",8,ae)):(n(),i("div",de,[t[11]||(t[11]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11v5m0 5a9 9 0 1 1 0-18a9 9 0 0 1 0 18Zm.05-13v.1h-.1V8h.1Z"})],-1)),e("span",pe,o(s.$t("Update script first")),1)]))]))),256))])),x(Y,{class:"mt-3",pagination:u.rows.meta},null,8,["pagination"])]),x($,{isOpen:c.value},{default:b(()=>[e("div",ue,[e("div",me,[e("div",ce,[e("div",null,[e("img",{class:"h-8 w-8",src:"/images/"+w.value,alt:"Whatsapp Logo"},null,8,ve)]),e("div",ge,o(s.$t(y.value)),1)])]),e("form",{onSubmit:t[3]||(t[3]=g(r=>U(),["prevent"]))},[e("div",null,[e("div",fe,o(s.$t("Update module")),1),e("h4",he,o(s.$t("A new version is available. Would you like to proceed with updating the module?")),1)]),e("div",be,[e("button",{type:"button",onClick:t[2]||(t[2]=g(r=>c.value=!1,["self"])),class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},o(s.$t("No, not now")),1),e("button",{class:k(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":l(a).processing}]),disabled:l(a).processing},[l(a).processing?(n(),i("svg",we,[...t[13]||(t[13]=[e("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),e("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[e("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1)])])):(n(),i("span",ye,o(s.$t("Yes, run the update")),1))],10,xe)])],32)])]),_:1},8,["isOpen"]),x($,{isOpen:m.value},{default:b(()=>[e("div",_e,[e("div",ke,[e("div",Ce,[e("div",$e,o(s.$t("Update to the latest version")),1)])]),e("form",{onSubmit:t[5]||(t[5]=g(r=>z(),["prevent"]))},[e("div",null,[e("h4",Ae,o(s.$t("Would you like to proceed with updating Blazz?")),1)]),e("div",Be,[e("button",{type:"button",onClick:t[4]||(t[4]=g(r=>m.value=!1,["self"])),class:"inline-flex justify-center rounded-md border border-transparent bg-slate-50 px-4 py-2 text-sm text-slate-500 hover:bg-slate-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 mr-4"},o(s.$t("No, not now")),1),e("button",{class:k(["inline-flex justify-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",{"opacity-50":l(v).processing}]),disabled:l(v).processing},[l(v).processing?(n(),i("svg",Me,[...t[14]||(t[14]=[e("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"},null,-1),e("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[e("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})],-1)])])):(n(),i("span",Ve,o(s.$t("Yes, run the update")),1))],10,Ze)])],32)])]),_:1},8,["isOpen"])]),_:1}))}};export{Xe as default};
