import{D as k,r as y,m as R,V as L,q as j,R as K,S as V,H as M,W as U,o as q,f as z,g as w,a as H,j as O,u as A,J as E,X as J,n as Q}from"./app-ff1cf28b.js";import{w as W,h as X,o as d,u as Z,A as T,i as C,N as _,b as c,v as G,e as F,_ as N,O as Y}from"./keyboard-86bd0e32.js";import{w as ee,t as te,i as P,l as ae}from"./transition-84b18172.js";import{s as ne}from"./index-67ab22c4.js";import{p as le,u as oe,f as re,c as I}from"./ProfileModal-a020d5af.js";import{i as ue}from"./use-tree-walker-fb5717b8.js";var se=(a=>(a[a.Open=0]="Open",a[a.Closed=1]="Closed",a))(se||{}),ie=(a=>(a[a.Pointer=0]="Pointer",a[a.Other=1]="Other",a))(ie||{});function ce(a){requestAnimationFrame(()=>requestAnimationFrame(a))}let B=Symbol("MenuContext");function D(a){let v=U(B,null);if(v===null){let p=new Error(`<${a} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(p,D),p}return v}let ve=k({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(a,{slots:v,attrs:p}){let f=y(1),b=y(null),m=y(null),e=y([]),s=y(""),o=y(null),h=y(1);function S(t=l=>l){let l=o.value!==null?e.value[o.value]:null,n=Y(t(e.value.slice()),g=>d(g.dataRef.domRef)),u=l?n.indexOf(l):null;return u===-1&&(u=null),{items:n,activeItemIndex:u}}let r={menuState:f,buttonRef:b,itemsRef:m,items:e,searchQuery:s,activeItemIndex:o,activationTrigger:h,closeMenu:()=>{f.value=1,o.value=null},openMenu:()=>f.value=0,goToItem(t,l,n){let u=S(),g=re(t===I.Specific?{focus:I.Specific,id:l}:{focus:t},{resolveItems:()=>u.items,resolveActiveIndex:()=>u.activeItemIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.disabled});s.value="",o.value=g,h.value=n??1,e.value=u.items},search(t){let l=s.value!==""?0:1;s.value+=t.toLowerCase();let n=(o.value!==null?e.value.slice(o.value+l).concat(e.value.slice(0,o.value+l)):e.value).find(g=>g.dataRef.textValue.startsWith(s.value)&&!g.dataRef.disabled),u=n?e.value.indexOf(n):-1;u===-1||u===o.value||(o.value=u,h.value=1)},clearSearch(){s.value=""},registerItem(t,l){let n=S(u=>[...u,{id:t,dataRef:l}]);e.value=n.items,o.value=n.activeItemIndex,h.value=1},unregisterItem(t){let l=S(n=>{let u=n.findIndex(g=>g.id===t);return u!==-1&&n.splice(u,1),n});e.value=l.items,o.value=l.activeItemIndex,h.value=1}};return ee([b,m],(t,l)=>{var n;r.closeMenu(),W(l,X.Loose)||(t.preventDefault(),(n=d(b))==null||n.focus())},R(()=>f.value===0)),L(B,r),te(R(()=>Z(f.value,{0:P.Open,1:P.Closed}))),()=>{let t={open:f.value===0,close:r.closeMenu};return T({ourProps:{},theirProps:a,slot:t,slots:v,attrs:p,name:"Menu"})}}}),de=k({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(a,{attrs:v,slots:p,expose:f}){var b;let m=(b=a.id)!=null?b:`headlessui-menu-button-${C()}`,e=D("MenuButton");f({el:e.buttonRef,$el:e.buttonRef});function s(r){switch(r.key){case c.Space:case c.Enter:case c.ArrowDown:r.preventDefault(),r.stopPropagation(),e.openMenu(),M(()=>{var t;(t=d(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(I.First)});break;case c.ArrowUp:r.preventDefault(),r.stopPropagation(),e.openMenu(),M(()=>{var t;(t=d(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(I.Last)});break}}function o(r){switch(r.key){case c.Space:r.preventDefault();break}}function h(r){a.disabled||(e.menuState.value===0?(e.closeMenu(),M(()=>{var t;return(t=d(e.buttonRef))==null?void 0:t.focus({preventScroll:!0})})):(r.preventDefault(),e.openMenu(),ce(()=>{var t;return(t=d(e.itemsRef))==null?void 0:t.focus({preventScroll:!0})})))}let S=ne(R(()=>({as:a.as,type:v.type})),e.buttonRef);return()=>{var r;let t={open:e.menuState.value===0},{...l}=a,n={ref:e.buttonRef,id:m,type:S.value,"aria-haspopup":"menu","aria-controls":(r=d(e.itemsRef))==null?void 0:r.id,"aria-expanded":e.menuState.value===0,onKeydown:s,onKeyup:o,onClick:h};return T({ourProps:n,theirProps:l,slot:t,attrs:v,slots:p,name:"MenuButton"})}}}),pe=k({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(a,{attrs:v,slots:p,expose:f}){var b;let m=(b=a.id)!=null?b:`headlessui-menu-items-${C()}`,e=D("MenuItems"),s=y(null);f({el:e.itemsRef,$el:e.itemsRef}),ue({container:R(()=>d(e.itemsRef)),enabled:R(()=>e.menuState.value===0),accept(t){return t.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:t.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(t){t.setAttribute("role","none")}});function o(t){var l;switch(s.value&&clearTimeout(s.value),t.key){case c.Space:if(e.searchQuery.value!=="")return t.preventDefault(),t.stopPropagation(),e.search(t.key);case c.Enter:if(t.preventDefault(),t.stopPropagation(),e.activeItemIndex.value!==null){let n=e.items.value[e.activeItemIndex.value];(l=d(n.dataRef.domRef))==null||l.click()}e.closeMenu(),N(d(e.buttonRef));break;case c.ArrowDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(I.Next);case c.ArrowUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(I.Previous);case c.Home:case c.PageUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(I.First);case c.End:case c.PageDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(I.Last);case c.Escape:t.preventDefault(),t.stopPropagation(),e.closeMenu(),M(()=>{var n;return(n=d(e.buttonRef))==null?void 0:n.focus({preventScroll:!0})});break;case c.Tab:t.preventDefault(),t.stopPropagation(),e.closeMenu(),M(()=>G(d(e.buttonRef),t.shiftKey?F.Previous:F.Next));break;default:t.key.length===1&&(e.search(t.key),s.value=setTimeout(()=>e.clearSearch(),350));break}}function h(t){switch(t.key){case c.Space:t.preventDefault();break}}let S=ae(),r=R(()=>S!==null?(S.value&P.Open)===P.Open:e.menuState.value===0);return()=>{var t,l;let n={open:e.menuState.value===0},{...u}=a,g={"aria-activedescendant":e.activeItemIndex.value===null||(t=e.items.value[e.activeItemIndex.value])==null?void 0:t.id,"aria-labelledby":(l=d(e.buttonRef))==null?void 0:l.id,id:m,onKeydown:o,onKeyup:h,role:"menu",tabIndex:0,ref:e.itemsRef};return T({ourProps:g,theirProps:u,slot:n,attrs:v,slots:p,features:_.RenderStrategy|_.Static,visible:r.value,name:"MenuItems"})}}}),Se=k({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(a,{slots:v,attrs:p,expose:f}){var b;let m=(b=a.id)!=null?b:`headlessui-menu-item-${C()}`,e=D("MenuItem"),s=y(null);f({el:s,$el:s});let o=R(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===m:!1),h=le(s),S=R(()=>({disabled:a.disabled,get textValue(){return h()},domRef:s}));j(()=>e.registerItem(m,S)),K(()=>e.unregisterItem(m)),V(()=>{e.menuState.value===0&&o.value&&e.activationTrigger.value!==0&&M(()=>{var i,x;return(x=(i=d(s))==null?void 0:i.scrollIntoView)==null?void 0:x.call(i,{block:"nearest"})})});function r(i){if(a.disabled)return i.preventDefault();e.closeMenu(),N(d(e.buttonRef))}function t(){if(a.disabled)return e.goToItem(I.Nothing);e.goToItem(I.Specific,m)}let l=oe();function n(i){l.update(i)}function u(i){l.wasMoved(i)&&(a.disabled||o.value||e.goToItem(I.Specific,m,0))}function g(i){l.wasMoved(i)&&(a.disabled||o.value&&e.goToItem(I.Nothing))}return()=>{let{disabled:i,...x}=a,$={active:o.value,disabled:i,close:e.closeMenu};return T({ourProps:{id:m,ref:s,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,onClick:r,onFocus:t,onPointerenter:n,onMouseenter:n,onPointermove:u,onMousemove:u,onPointerleave:g,onMouseleave:g},theirProps:{...p,...x},slot:$,attrs:p,slots:v,name:"MenuItem"})}}});const ye={__name:"Dropdown",props:{align:{type:String,default:"right"}},setup(a){const v=a;return(p,f)=>(q(),z(A(ve),{as:"div",class:"relative inline-block text-left"},{default:w(()=>[H("div",null,[O(A(de),{as:"template"},{default:w(()=>[E(p.$slots,"default")]),_:3})]),O(J,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:w(()=>[O(A(pe),{class:Q([{"right-0 origin-top-right":v.align==="right","left-0 origin-top-left":v.align==="left","top-[-135px] left-0 origin-top-left":v.align==="top-left"},"z-10 absolute mt-2 w-32 divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"])},{default:w(()=>[E(p.$slots,"items")]),_:3},8,["class"])]),_:3})]),_:3}))}};export{ye as _,Se as b};
