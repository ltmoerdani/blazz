import{r as d,c as a,a as e,t as o,k as h,b as m,j as p,n as C,g as f,u as x,o as r,h as v,i as y,x as k}from"./app-0c4c5d77.js";import{_ as $}from"./FormInput-7e903ff6.js";const A={class:"flex h-screen justify-center"},V={class:"flex justify-center"},j={class:"mt-20"},M={class:"flex justify-center mb-5"},N={class:"text-2xl text-center"},P={key:0,class:"md:w-[20em] p-2"},S={class:"text-center text-xl mb-4"},Z={key:0,class:"mt-4 p-2 bg-slate-200 border-l-[2px] border-red-500 my-4 max-w-[28em] text-sm"},B={class:"mt-2"},T={key:0,href:"/install/database",type:"submit",class:"mt-4 rounded-md bg-primary px-3 py-2 text-sm text-white shadow-sm w-full"},U={key:1,type:"button",class:"mt-4 rounded-md bg-primary px-3 py-2 text-sm text-white shadow-sm w-full flex justify-center"},E={key:1,class:"md:w-[30em] p-2"},D={class:"bg-slate-200 p-2 border-l-[3px] border-red-800 text-sm"},W={class:"flex justify-center gap-x-2"},z={key:0,type:"submit",class:"w-[10em] mt-4 rounded-md bg-primary px-3 py-2 text-sm text-white shadow-sm"},L={key:1,type:"button",class:"w-[10em] mt-4 rounded-md bg-primary px-3 py-2 text-sm text-white shadow-sm flex justify-center"},q={key:2,class:"md:w-[30em] p-2"},F={class:"text-center text-xl mb-4"},G={class:"bg-green-50 p-2 border-l-[3px] border-green-800 mb-2"},H={class:"bg-slate-100 rounded p-4"},I={class:"bg-slate-200 p-2 rounded-md mt-2"},J={class:"mb-2"},K={class:"text-sm"},O={class:"flex gap-x-1"},Q={class:"flex justify-between gap-x-2"},Y={__name:"Update",props:["path"],setup(_){const b=_,l=d(null),n=d(!1),i=d(null),w=async()=>{n.value=!0,(await k.post("/update",{purchase_code:u.value.purchase_code})).data.statusCode===200&&(l.value="finish")},u=d({purchase_code:null}),g=async()=>{n.value=!0,l.value="migrate",i.value=null,n.value=!1};return(t,s)=>(r(),a("div",A,[e("div",V,[e("div",j,[e("div",M,[e("div",null,[s[3]||(s[3]=e("h4",{class:"text-2xl mb-2 text-center"},"Swiftchats",-1)),e("h1",N,o(t.$t("Proceed to update")),1)])]),l.value===null?(r(),a("div",P,[t.isValidPurchaseCode?m("",!0):(r(),a("form",{key:0,onSubmit:s[1]||(s[1]=h(c=>g(),["prevent"]))},[e("h4",S,o(t.$t("Enter Purchase Code")),1),i.value!=null?(r(),a("div",Z,o(i.value),1)):m("",!0),p($,{modelValue:u.value.purchase_code,"onUpdate:modelValue":s[0]||(s[0]=c=>u.value.purchase_code=c),name:t.$t("Purchase Code"),type:"text",placeholder:"Purchase code",class:C("sm:col-span-6 mb-2")},null,8,["modelValue","name"]),e("div",B,[n.value?(r(),a("button",U,[...s[4]||(s[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"}),e("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[e("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})])],-1)])])):(r(),a("button",T,o(t.$t("Next Step")),1))])],32))])):l.value==="migrate"?(r(),a("div",E,[e("div",D,[e("p",null,o(t.$t("When you click proceed, your script will be updated automatically! Do not navigate away from the page while this process is ongoing.")),1)]),e("form",{onSubmit:s[2]||(s[2]=h(c=>w(),["prevent"]))},[e("div",W,[n.value?(r(),a("button",L,[...s[5]||(s[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[e("path",{fill:"currentColor",d:"M12 2A10 10 0 1 0 22 12A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8A8 8 0 0 1 12 20Z",opacity:".5"}),e("path",{fill:"currentColor",d:"M20 12h2A10 10 0 0 0 12 2V4A8 8 0 0 1 20 12Z"},[e("animateTransform",{attributeName:"transform",dur:"1s",from:"0 12 12",repeatCount:"indefinite",to:"360 12 12",type:"rotate"})])],-1)])])):(r(),a("button",z,o(t.$t("Proceed")),1))])],32)])):l.value==="finish"?(r(),a("div",q,[e("p",F,o(t.$t("Update Successfull!")),1),e("div",G,[e("p",null,o(t.$t("The application has been updated successfully!")),1)]),e("div",H,[e("div",I,[e("p",J,o(t.$t("Website Url")),1),e("div",K,[e("div",O,[p(x(y),{href:"/",class:"underline"},{default:f(()=>[v(o(b.path),1)]),_:1})])])])]),e("div",Q,[p(x(y),{href:"/",class:"mt-4 rounded-md bg-primary px-3 py-2 text-sm text-white shadow-sm w-full text-center"},{default:f(()=>[v(o(t.$t("Proceed To Main Site")),1)]),_:1})])])):m("",!0)])])]))}};export{Y as default};
